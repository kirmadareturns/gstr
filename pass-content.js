let typingTimeout;function simulateTyping(e,t,n){clearTimeout(typingTimeout),e.value="";let c=0;!function s(){if(c<t.length){const n=new Event("input",{bubbles:!0,cancelable:!0});e.value+=t[c],e.dispatchEvent(n),c++,typingTimeout=setTimeout(s,100)}else n&&n()}()}chrome.runtime.onMessage.addListener(((e,t,n)=>{if("typeCredentials"===e.action){const{userId:t,password:r}=e;if(window.location.href!=="https://services.gst.gov.in/services/login")return document.querySelector('a[target="_self"][href="//services.gst.gov.in/services/login"][data-ng-click="clearPostPP()"]').click(),void n({success:!0,error:"GSTReload"});var c=document.querySelector("#username");document.querySelector("#username").value="";var s=document.querySelector("#user_pass");return document.querySelector("#user_pass").value="",c?simulateTyping(c,t,(()=>{simulateTyping(s,r);const e=setInterval((()=>{const t=document.querySelector("#imgCaptcha");t&&t.src&&(clearInterval(e),n({success:!0,captchaSrc:t.src}))}),100)})):n({success:!1,error:"UserId field not found"}),!0}if("finishLogin"===e.action){const{captcha:t}=e,n=document.querySelector("#captcha"),c=document.querySelector("button.btn.btn-primary[data-ng-bind='trans.HEAD_LOGIN']");n&&simulateTyping(n,t,(()=>{c.click();const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});c.dispatchEvent(e)}))}}));const style0=document.createElement("style");style0.innerHTML="\n  .captcha {\n    width: 350px;\n  display:none;\n    }\n",document.head.appendChild(style0);